name: Check Seattle Run Club Shuffle Site

on:
  pull_request:
    paths:
      - 'seattle-run-club-shuffle/**'
      - '.github/workflows/check-seattle-run-club-shuffle.yml'
  push:
    branches: [main]
    paths:
      - 'seattle-run-club-shuffle/**'
      - '.github/workflows/check-seattle-run-club-shuffle.yml'
  workflow_dispatch:

jobs:
  build-check:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Build static site bundle
        run: |
          rm -rf dist
          mkdir -p dist
          cp -R seattle-run-club-shuffle/. dist/

      - name: Verify required site files exist
        run: |
          test -f dist/index.html
          test -f dist/styles.css
          test -f dist/app.js

      - name: Validate JavaScript syntax
        run: |
          node --check dist/app.js
          node --check dist/submit.js
          node --check dist/theme.js
